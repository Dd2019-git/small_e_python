Муйне бот 2023 - 3 первичное заполнение v2
# 09 oct переписано - сокращено количество полей для ссылок (все равно там массив)
# 09 oct унифицировано поле для тегов по всем таблицам и теги переписаны через # чтобы не возиться в коде.
# унификация нужна прежде всего для работы с кодом, потому что в код приходит простой кортеж 
# поэтому сначала тесты , потом боевой код. 

Пример заполнения данных для общих вопросов - Bot info
По факту для удобства это сводится к id - заголовок - текст - ссылка - гео - теги. Надо переписать будет в таком виде. 

И надо делать отдельную таблицу Locations - всякие места. Дальние, ближние, полезные магазины, станции. 
Прокат. И там же класс "сервисов. 

DROP TABLE IF EXISTS generalquestions CASCADE;

CREATE TABLE generalquestions (
    id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
	r1_title VARCHAR(500),
    r2_text TEXT,
	r3_links text ARRAY,
	r4_geogoogle text ARRAY,
    r5_tags text ARRAY
);

	 INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags)
VALUES
    ('Bot INFO','Bot version 005',  '{#infotesttag,#infotag2,#botinfotag}' );    

INSERT INTO generalquestions
    (r1_title, r2_text, r3_links, r4_geogoogle, r5_tags)
VALUES
    ('Мотоэкипировка', 'Магазины мотошлемов - это  403 DUONG, и остальные из FAQ по ссылке',
	'{https://t.me/muine_faq/352}', '{https://goo.gl/maps/U3oc7Tka24C2}', '{#шлем, #мото, #байк, #скутер}');  
	
	 INSERT INTO generalquestions
    (r1_title, r5_tags, r3_links)
VALUES
    ('Штрафы и скоростной режим','{#мото, #байк, #скутер, #штраф}', '{https://lawnet.vn/thong-tin-phap-luat/en/giao-thong/vietnam-speeding-fines-for-motorbikes-and-cars-in-2022-103510.html}');  


INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags, r3_links, r4_geogoogle)
VALUES
    ('Про поездку на остров Фукуй (Phú Quý )',
	('В нескольких часах пути морем от Фантьета лежит остров Фукуй (Phú Quý ) - точнее, архипелаг из 12 островов, размерами 6*3 километра у основного.
	До карантинов на него требовалось приглашение, в 2023 году приглашение не нужно, но гостиницу лучше забронировать заранее. 
	На острове прекрасный ветер, вид на океан, пагоды и в целом все. На остров идет быстрый пассажирский паром и медленный грузовик. 
	Билеты продаются напротив порта и по адресу 535 Tran Hung Dao, по погодным условиям иногда рейсы отменяют, 
	то есть можно на 2-5 дней застрять на острове из-за шторма.'),
	'{#поездки, #остров, #посмотреть, #билеты, #фукуй}', 
	'{https://t.me/muine_faq/352, https://t.me/Muine_Locals/102082, https://t.me/Muine_Locals/102077, 
	https://vi.wikipedia.org/wiki/Ph%C3%BA_Qu%C3%BD}',
	'{https://maps.app.goo.gl/Nz4oJspJUVRws7oc9}');  
	
	INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags, r3_links)
VALUES
    ('Краткий путеводитель по Муйне (Mũi Né)',
	
	('Муйне - Mũi Né – небольшой (25 тысяч населения) город - спутник (административно - один из районов) рядом расположенного города Phan Thiết (330 тысяч населения на 2015 год, 4  километра от реки до заезда в Муйне), в провинции Bình Thuan.  До города ходят два автобуса – каждые полчаса № 1, и иногда № 9. 
Мимо города проходит две крупные автострады, вторую открыли в мае 2023 года, и теперь путь от аэропорта Хошимина до города (200 километров) сократился с примерно 4 часов на автобусе или джипе до 2.5 – 3. 
Доехать от Хошимина дешевле всего на автобусе. Удобнее всего чартером из аэропорта. Третий вариант – поездом, менее удобен и по расписанию и по положению жд станций Ga Phan Thiết (тупиковая) и Ga Binh Thuan. 
Территориально Муйне вытянут вдоль берега на 15 километров от заезда со стороны Фан Тьета (заправки) до третьего съезда, и 25 километров считая до отеля Mandala Cham Bay Mũi Né за горой Hòn Rơm. Почти везде пляжи разной степени пляжности и направления волн и ветра. Ветер, и с ним волны, меняются зимой и летом, на разных пляжах в разное время года и дня по разному – где-то прибой в полметра, где-то спокойно как в луже (на волнорезе в пересыхающей в отлив части). Разница прилив \ отлив – в среднем до 1.5 метров, это нужно учитывать. Пляжи в основном песчаные.
Муйне состоит из  следующих частей, начиная от заезда (заправки). 
khu phố 1, или от заезда до первого поворота с хайвея. 
Включает в себя пляж на волнорезе, он же серф спот «литт будда», огромный пляж за отелем си хорс (Sea horse) , виллы на горе (Mũi Né Domaine Vila), отель Си линкс (Sea Links Golf Country Club), включая винный замок (Lâu đài rượu vang RD Phan Thiết - Mũi Né с экскурсией по погребу), и так далее. Включая все виды отелей и гест-хаусов.
khu phố 2 или Боке. От первого заезда до рынка. Отели, отели, все виды отелей и гестов. Пляж .. ну .. вход в море неудобный очень вплоть до пряжа у отелей Meraki Oasis, Hoang Ngoc Beach Resort, Muine Ocean Place Boutique Hotel
khu phố 3, административно это район рынка и район за хайвеем, но его можно рассматривать как «от поворота на отель Венус до второго съезда с хайвея, там где рынок». Вход в море тоже не очень.
khu phố 4, от второго сьезда с хайвея до отеля Centara Mirage. Отели есть, пляжи есть. Есть ручей фей. 
Непосредственно Mũi Né, включая саму деревню, гору (и мыс) Hòn Rơm, и до отеля Mandala Cham Bay Mũi Né. Самый большой пляж – Малибу, идет почти от мыса (с кладбищем) и острова Am Cậu (делать на нем особо нечего, удобного захода для осмотра нет) до горы Hòn Rơm. С горы прекрасный вид на море и заброшенную стройку, но в воду там не зайти, исключительно в спокойную погоду сплавиться вдоль на сапе. За горой тоже неплохой пляж и отели. 
На гугль-карте в режиме спутника все прекрасно видно – и отели, и пляжи. 
Необходимо учитывать, что иногда пляжи за летний сезон размывает (как в 2023) и ситуация с пляжами меняется. '),
	'{#муйне, #жилье, #пляжи, #faq}',
	'{https://t.me/muienefaq3/3}'
	);
	
UPDATE generalquestions
SET r3_links = '{https://t.me/muienefaq3/3}'
WHERE id =5 
	
	select * from generalquestions where id=5
	
	
	
	
		INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags)
VALUES
    ('Как искать жилье',
	
	('Какого-то универсального сервиса подбора на 2023 год мне не известно. Есть пересдача вилл, были еще какие-то индивиуальные попытки. 
	Поэтому проще так: Вы сначала решаете, какой район вам нужен - си линкс (начало), боке (середина), рынок, ручей, или сама деревня. Или за хайвеем. Отель (или гест) с бассейном или без, на первом этаже или выше, вилла или гест. С кухней, без, сколько комнат. Потом прикидываете бюджет и озвучиваете в чат все перечисленное. Потому что бюджет в сезон будет от 200 до 2.000 USD, в зависимости от местоположения. 
Для бронирования отелей есть букинг (https://www.booking.com/) и агода (https://www.agoda.com/), 
но при этом масса гест хаусов и отдельных домов не зарегистрированы ни в каких букингах \ агодах \ airbnb , ограничиваясь объявлением на столбах. 
У некоторых и того нет. Английский где-то знают, где-то нет. Первая – вторая линия сдается почти вся и везде, как и отдельные дома за хайвеем 
Используйте ZALO и смотрите группы в фейсбуке'),	'{#муйне, #жилье, #faq}');
	
	UPDATE generalquestions
SET r3_links = '{https://t.me/muienefaq3/100}'
WHERE id =6

	
			INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags, r3_links)
VALUES
    ('Пляжи, ветер и волны',
	'1 - пляж на волнорезе, он же серф спот «литт будда», 
	2 - огромный пляж за отелем си хорс (Sea horse), проход или через отель или через 2 открытых выезда 
	3 - пляж около 1 поворота, но его серьезно размыло
	4 - пляж "у двух труб" - у начала набережной
	5 - Малибу, или дальний пляж за выездом
	6 - Пляж за горой Хон Ром
	Длина деревни 15-25 километров, и почти везде (кроме района боке) - пляжи разной чистоты и удобства
	ветер в сезон (с ноября по март .. апрель) дует вдоль берега от деревни в город, весной поворачивает на противоположное направление и ослабевает.
	волны есть, если где-то в море шторм, то за зоной прибоя  - метрах в 50 от берега - бывают и по 2-3 метра. 
	У берега мелко, на волнорезе в отлив получается заводь.
	'),'{#муйне, #пляжи, #faq, #ветер, #волны, #онлайн, #погода}','{https://on.windy.com/89634}');
	
		UPDATE generalquestions
SET r2_text = '1 - пляж на волнорезе, он же серф спот «литт будда», 
2 - огромный пляж за отелем си хорс (Sea horse), проход или через отель или через 2 открытых выезда 
3 - пляж около 1 поворота, но его серьезно размыло
4 - пляж "у двух труб" - у начала набережной
5 - Малибу, или дальний пляж за выездом
6 - Пляж за горой Хон Ром

Длина деревни 15-25 километров, и почти везде (кроме района боке) - есть пляжи разной чистоты и удобства
ветер в сезон (с ноября по март .. апрель) дует вдоль берега от деревни в город, весной поворачивает на противоположное направление и ослабевает.
	волны есть, если где-то в море шторм, то за зоной прибоя - метрах в 50 от берега - волны бывают и по 2-3 метра. 
	У берега мелко, на волнорезе в отлив получается заводь.'
WHERE id =6
	
	
				INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags, r4_geogoogle)
VALUES
    ('Продуктовые магазины', ('В местных магазинах нет привычных маянезиков «ряба» и «провансаль», есть какой-то другой. 
	Йогурта, ряженки, простокваши и молока 0.5% тоже нет. 
	Молоко есть обычное (plain), подслащенное, сладкое и толи кокосовое, толи рисовое. 
	Основными источниками пропитания для бедного туриста (кроме 2 километров кафе в боке и остальных точек) являются:
	1 - первый зеленый магазин у рынка (Bách hoá XANH - 228 Nguyễn Đình Chiểu). Молоко, сгущенка, майонез, печенье, овощи-фрукты, хозтовары. 
	2 - магазин напротив рынка - Nguyễn Đình Chiểu 335A. Молоко, сыр, свежий черный и белый хлеб, мясо глубокой заморозки, прочие товары.
	3 - рынок Chợ Hàm Tiến. Открывается в примерно 7 утра, утром выпекают белые булки, в основном фрукты, но есть и рыба и мясо и хозтовары. X63W+M2X, Nguyễn Đình Chiểu
	4 - второй зеленый магазин на вьезде в деревню, от светофора прямо 100 метров. 343 Huỳnh Thúc Kháng
	5 - магазин Брюса Ли с разного рода алкоголем, черным (и не только) чаем, кофе (в зернах, но у него и кофемолка есть, надо только спросить. 
	Сам владелец прекрасно говорит по русски, очень рекомендую. Ориентир - справа от QUIKSILVER, 63 Nguyễn Đình Chiểu
	кроме того, есть масса мелких магазинов по всей деревне с разного рода пропитанием, и "тайские" магазины с алкоголем.
	не стоит забывать и про 
	6 - Лотте Март в Фантьете
	7 - Кооп Мар в Фантьете
	'),'{#продукты, #еда, #мясо, #молоко, #сыр, #мясо}','{https://maps.app.goo.gl/npvFusfgDsDfKaxH6}'	
	);
	
					INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags)
VALUES
    ('Переводы из РФ и обмен денег',
	'Перевод короной: на 10\2023 нельзя получить переводы в BIDV, уточняйте в короне пункты выдачи (OTP)
	Проще всего привозить наличные доллары, ВАЖНО не забыть их задекларировать на таможне. ВАЖНО чтобы сумму прописали цифрами И прописью И поставили печать.
	Доллары желательно "нового образца". Курс на наличные 100\50 и 20\10 - разный (но не сильно). 
	Курс на купюры старого образца может быть ниже.
	Потом можно открыть (даже по туристической визе) долларовый счет в том же BIDV, чтобы не хранить деньги в номере.
	При открытии счета требуется подписанная и проштампованная декларация с таможни. Можно вносить не всю сумму с декларации.
	Декларацию скопируют и вернут. 
	Пластиковую карту не оформляют.
	Обмен наличных долларов и евро: почти везде, курс на новые долларовые купюры примерно одинаков. 
	чуть лучше у Брюса Ли, аптека 1001, Дима тур .
	Ходят слухи, что еще чуть выше в загадочной ювелирной лавке на рынке в Фантьете.
	Перевод рублями через посредника. Иногда возможен, но нужно искать людей. Не проверял. 
	Перевод криптой: все сложно и я не могу описывать или рекомендовать этот способ.	
	',
	'{#обмен, #доллар, #доллары, #евро, #валюта, #рубли}' );
	
	Select * from generalquestions;
	
INSERT INTO generalquestions
    (r1_title, r2_text, r5_tags)
VALUES
    ('Какая погода в декабре?',
	'Декабрь - начало туристического и кайт сезона в Муйне. Дождей уже нет. Стоит жаркая погода +34. Вода прогревается хорошо. 
	Медуз в декабре не наблюдается.
Всех волнуют волны. Так как Муйне - курорт для кайтеров, волны здесь практически всегда.
Но! не стоит расстраиваться - c утра волны совсем небольшие, и после 11 часов,  когда солнце очень активное, все туристы уходят к бассейнам на шезлонги. 
А на море выходят кайтеры, создавая полетами на парашютах красивую картинку в море в радость туристам',
'{#faq, #примерответа1, #погода, #декабрь}');

	UPDATE generalquestions
SET r2_text= 'Декабрь - начало туристического и кайт сезона в Муйне. Дождей уже нет. Стоит жаркая погода +34. Вода прогревается хорошо. 
Медуз в декабре не наблюдается.
Всех волнуют волны. Так как Муйне - курорт для кайтеров, волны здесь практически всегда.
Но! не стоит расстраиваться - c утра волны совсем небольшие, и после 11 часов,  когда солнце очень активное, все туристы уходят к бассейнам на шезлонги. 
А на море выходят кайтеры, создавая полетами на парашютах красивую картинку в море в радость туристам'
WHERE id =10
	
	


### Заполнение данных для каналов \ чатов
DROP TABLE IF EXISTS channelsforbot CASCADE;

CREATE TABLE channelsforbot (
    id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
	textfield1_titleshort VARCHAR(500),
    textfield2_chatid TEXT,
    textfield3_username TEXT,
    textfield4_userid TEXT,	
	textfield5_istest VARCHAR(10)
);

INSERT INTO channelsforbot
    (textfield1_titleshort, textfield2_chatid, textfield3_username, textfield4_userid, textfield5_istest)
VALUES
('First test chat id pers',
'362666004',
'test user name',
'test used id',
'test'
);
INSERT INTO channelsforbot
    (textfield1_titleshort, textfield2_chatid, textfield3_username, textfield4_userid, textfield5_istest)
VALUES
('Prod chat id Muine FAQ3',
'-1001919857058',
'test user name',
'test used id',
'prod'
);



Select * from channelsforbot;


### таблица для отладки
DROP TABLE IF EXISTS temptests CASCADE;

CREATE TABLE temptests (
    id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
	textfield1_testfieldA1 VARCHAR(500),
    textfield2_testfieldB2 TEXT,
	textfield3_numsC3 integer,
    textfield4_arrtextD4 text ARRAY,
	textfield5_arrnumsE5 integer ARRAY,
	textfield4_4links text ARRAY
);

INSERT INTO temptests
    (textfield1_testfieldA1, textfield2_testfieldB2,textfield3_numsC3 , textfield4_arrtextD4,textfield5_arrnumsE5 )
VALUES
('text1-1 ',
'text1-2',
'1234',
'{arrt1, attt2}',
'{1,2,5,10}',
'{#test001, #test002}'
);

INSERT INTO temptests
    (textfield1_testfieldA1, textfield2_testfieldB2,textfield3_numsC3 , textfield4_arrtextD4,textfield5_arrnumsE5 )
VALUES
('text2-1 ',
'text2-2',
'5678',
'{arrt3, aarrrrrrr6}',
'{1,2,5,10,22,12}',
'{#test003, #test004, #test005}'
);
Select * from temptests;


## blacklist 
DROP TABLE IF EXISTS blacklist_user CASCADE;

CREATE TABLE blacklist_user (
    id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
	blacklist_userid VARCHAR(500),
    blacklist_username TEXT,
	blacklist_reason TEXT,
	blacklist_from TEXT,
	blacklist_to TEXT,
	blacklist_count integer,
	blacklist_history text ARRAY

);

INSERT INTO blacklist_user
    (blacklist_userid, blacklist_username, blacklist_reason, blacklist_from, blacklist_to, blacklist_count)
VALUES
('123456',
'TEST USER',
'reason - test',
'1.1.1990',
'1.1.2020',
10
);
Select * from blacklist_user;
